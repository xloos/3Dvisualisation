<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PC Building Training Program - Building the Foundation</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
</head>
<body>
  
  <a-scene physics="gravity: -9.8; debug: true" vr-mode-ui="enabled: true">
    <a-assets>
      <a-asset-item id="zastrcka" src="zastrcka.glb"></a-asset-item>
      <a-asset-item id="PScable" src="PScable.glb"></a-asset-item>
      <a-asset-item id="krytnacpu" src="krytnacpu.glb"></a-asset-item>
      <a-asset-item id="cpu" src="cpu.glb"></a-asset-item>
      <a-asset-item id="ram" src="ram.glb"></a-asset-item>
      <a-asset-item id="ssd" src="ssd.glb"></a-asset-item>
      <a-asset-item id="srobzakladna" src="srobzakladna.glb"></a-asset-item>
      <a-asset-item id="motherboard" src="motherboard.glb"></a-asset-item>
      <a-asset-item id="PS" src="PS.glb"></a-asset-item>
      <a-asset-item id="notepad" src="notepad.glb"></a-asset-item>
      <a-asset-item id="screwdriver" src="screwdriver.glb"></a-asset-item>
      <a-asset-item id="tool_trolleys" src="tool_trolleys.glb"></a-asset-item>
      <a-asset-item id="lamp" src="lamp.glb"></a-asset-item>
      <a-asset-item id="woodencase" src="woodencase.glb"></a-asset-item>
      <a-asset-item id="GPU" src="GPU.glb"></a-asset-item>
      
      <img id="check_box" src="check_box.png">
      <img id="check" src="check.png">
      <img id="arrow" src="arrow.png">
      <img id="completed" src="completed.png">

      <!-- Hand models -->
      <a-asset-item id="hand-left" src="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.gltf"></a-asset-item>
      <a-asset-item id="hand-right" src="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.gltf"></a-asset-item>
    </a-assets>
    
    <a-entity environment="preset: tron; groundColor: #445; skyColor: #88c;"></a-entity>

    <a-entity id="camera" camera look-controls wasd-controls="acceleration: 10" position="0 1.6 0" dynamic-body>
      <a-entity hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc" gltf-model="#hand-left"></a-entity>
      <a-entity hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc" gltf-model="#hand-right"></a-entity>
      <a-entity gltf-model="#notepad" position="-0.6 -0.25 -0.6" rotation="80 15 0" scale="0.4 0.4 0.4" dynamic-body>
      <a-entity id="cpu_hand" gltf-model="#cpu" position="2.416 0.952 0.189" scale="5 5 5" rotation="35.370 51.543 -114.815" dynamic-body visible="false">
    </a-entity>
    <a-entity id="ram_hand" gltf-model="#ram" position="2.409 1.042 0.053" scale="5 5 5" rotation="-29.812 76.658 95.281" dynamic-body visible="false"></a-entity>
    <a-entity id="ssd_hand" gltf-model="#ssd" position="2.409 1.076 0.174" scale="5 5 5" rotation="-40.895 81.216 93.280" dynamic-body visible="false"></a-entity>

    <!-- Samotná základna doska aj s modelmi v nej do ruky-->
    <a-entity id="motherboard-wrapper_hand" position="2.803 9.417 6.067" rotation="-58.909 -50.529 55.040" scale="3 3 3" visible="false">
      <a-entity id="wmotherboard_hand" gltf-model="#motherboard" position="-1.162 1.033 -3.121" scale="2 2 2" rotation="-90 0 0" dynamic-body
        show-name-on-hover="distance: 2; checkmarkId: #check-motherboard-icon">
      
                <a-entity id="wcpu_motherboard_hand" gltf-model="#cpu" position="-0.001 0.042 -0.011" scale="1.200 1.200 1.200" rotation="0 0 0" dynamic-body visible="true">
  
      </a-entity>
      </a-entity>
  
      <a-entity id="wram_motherboard_hand" gltf-model="#ram" position="-1.054 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
      <a-entity id="wram_motherboard2_hand" gltf-model="#ram" position="-1.037 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
      <a-entity id="wram_motherboard3_hand" gltf-model="#ram" position="-1.020 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
      <a-entity id="wram_motherboard4_hand" gltf-model="#ram" position="-1.003 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
  
      <a-entity id="wssd_motherboard_hand" gltf-model="#ssd" position="-0.917 1.060 -3.151" scale="2 2 2" rotation="90.000 -89.990 90.000" dynamic-body visible="true"></a-entity>
  
      <a-entity id="wkrytnacpu2_hand" gltf-model="#krytnacpu" position="-1.158 1.033 -3.209" scale="2 2 2" rotation="-90 180.000 0" dynamic-body visibility="true" visible="true"></a-entity>
      
  
    </a-entity>




        <!-- Text with custom font -->
        <a-entity id="step-counter" text="value: ; color: red; shader: msdf; font: https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/justanotherhand/JustAnotherHand-Regular.json;" id="step1" position="0.221 0.091 -0.366" rotation="-90 0 0" width="1.5" align="left">
          <a-plane color="white" width="0.1" height="0.1" position="-0.374 0.041 -0.000" rotation="0 0 0" scale="2.900 1.070 1.000"></a-plane>
        </a-entity>
        
        <a-entity text="value: ; color: #FFFFFF; shader: msdf; font: https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/justanotherhand/JustAnotherHand-Regular.json;" id="step1" position="0.206 0.098 -0.094" rotation="-90 0 0" width="1.5" align="left"></a-entity>
        
        <!-- Checkmark pre komponenty -->
        <a-image id="check-ps" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <!-- Check remains hidden or visible -->
          <a-image id="check-ps-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="completed_image" src="#completed" position="-0.028 0.074 0.173" rotation="-90 0 0" scale="0.5 0.5 0.5" visible="false">
        </a-image>

        <a-image id="check-motherboard" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-motherboard-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-ram" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-ram-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-ssd" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-ssd-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-screwdriver" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-screwdriver-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-gpu" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-gpu-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-plug" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-plug-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-woodencase" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-woodencase-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>

        <a-image id="check-cpu" src="#check_box" position="0.025 0.140 0.185" rotation="-90 0 0" scale="0.25 0.25 0.25">
          <a-image id="check-cpu-icon" src="#check" position="0 0 0" rotation="0 0 0" scale="0.8 0.8 0.8" visible="false"></a-image>
        </a-image>
      </a-entity>
    
      <a-entity geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.01" position="0 0 -1" material="color: #FFFFFF; shader: flat"></a-entity>
    </a-entity>

    <!-- Objects and Lights -->
    <a-entity gltf-model="#lamp" shadow="cast: true; receive: true" position="2 4.5 -3.5" scale="2 2 2" rotation="0 0 0">
      <a-light type="spot" castShadow="true" color="#FFF" intensity="0.5" distance="10" decay="1" 
              position="-0.1 0.2 0" rotation="-90 0 0" angle="90"></a-light>
    </a-entity>

    <a-entity gltf-model="#lamp" shadow="cast: true; receive: true" position="-2 4.5 -3.5" scale="2 2 2" rotation="0 0 0">
      <a-light type="spot" castShadow="true" color="#FFF" intensity="0.5" distance="10" decay="1" 
              position="0 0.2 0" rotation="-90 0 0" angle="90"></a-light>
    </a-entity>

    <a-entity position="-5 0 -3" static-body>
      <a-entity id="pivot-wrapper" position="0 1 0" rotation="0 90 0">
        <a-entity gltf-model="#tool_trolleys" position="0 0 0" scale="1 1 1" rotation="0 0 0" static-body></a-entity>
      </a-entity>
    </a-entity>

    <!-- Modely a objekty s textami -->
    <a-entity id="motherboard" gltf-model="#motherboard" position="-1.162 1.033 -3.121" scale="2 2 2" rotation="-90 0 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-motherboard-icon">
      <a-text value="Motherboard" position="0 0.193 0" align="center" color="#FFFFFF" scale="0.33 0.33 0.33" face-camera 
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
              <a-entity id="cpu_motherboard" gltf-model="#cpu" position="-0.001 0.042 -0.011" scale="1.200 1.200 1.200" rotation="0 0 0" dynamic-body visible="false">

    </a-entity>
    </a-entity>


    <!-- Samotná základna doska aj s modelmi v nej -->
    <a-entity id="motherboard-wrapper" position="2.381 -1.479 -4.121" rotation="90.000 0 0" scale="1 1 1" visible="false">
    <a-entity id="wmotherboard" gltf-model="#motherboard" position="-1.162 1.033 -3.121" scale="2 2 2" rotation="-90 0 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-motherboard-icon">
    
              <a-entity id="wcpu_motherboard" gltf-model="#cpu" position="-0.001 0.042 -0.011" scale="1.200 1.200 1.200" rotation="0 0 0" dynamic-body visible="true">

    </a-entity>
    </a-entity>

    <a-entity id="wram_motherboard" gltf-model="#ram" position="-1.054 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
    <a-entity id="wram_motherboard2" gltf-model="#ram" position="-1.037 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
    <a-entity id="wram_motherboard3" gltf-model="#ram" position="-1.020 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>
    <a-entity id="wram_motherboard4" gltf-model="#ram" position="-1.003 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="true"></a-entity>

    <a-entity id="wssd_motherboard" gltf-model="#ssd" position="-0.917 1.060 -3.151" scale="2 2 2" rotation="90.000 -89.990 90.000" dynamic-body visible="true"></a-entity>

    <a-entity id="wkrytnacpu2" gltf-model="#krytnacpu" position="-1.158 1.033 -3.209" scale="2 2 2" rotation="-90 180.000 0" dynamic-body visibility="true" visible="true"></a-entity>
    

  </a-entity>

    <a-entity id="PScable" gltf-model="#PScable" position="-1.965 1.483 -2.806" scale="2 2 2" rotation="180 -2.350 -16.4" dynamic-body></a-entity>

    <a-entity id="PS" gltf-model="#PS" position="-2.466 1.103 -2.910" scale="2 2 2" rotation="0 90 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-ps-icon">
      <a-text value="Power Supply" position="0 0.119 0" align="center" color="#FFFFFF" scale="0.1 0.1 0.1" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="ram" gltf-model="#ram" position="-1.852 0.999 -2.890" scale="2 2 2" rotation="0 90 90" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-ram-icon">
      <a-text value="RAM" position="0 -0.072 0" align="center" color="#FFFFFF" scale="0.05 0.05 0.05" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="ram_motherboard" gltf-model="#ram" position="-1.054 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="false"></a-entity>
    <a-entity id="ram_motherboard2" gltf-model="#ram" position="-1.037 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="false"></a-entity>
    <a-entity id="ram_motherboard3" gltf-model="#ram" position="-1.020 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="false"></a-entity>
    <a-entity id="ram_motherboard4" gltf-model="#ram" position="-1.003 1.043 -3.181" scale="2.3 2.3 2.3" rotation="-90.000 -90.000 90" dynamic-body visible="false"></a-entity>
    

    <a-entity id="ssd" gltf-model="#ssd" position="-1.742 0.994 -2.838" scale="2 2 2" rotation="0 90 90" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-ssd-icon">
      <a-text value="SSD" position="0 -0.063 0" align="center" color="#FFFFFF" scale="0.05 0.05 0.05" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="ssd_motherboard" gltf-model="#ssd" position="-0.917 1.060 -3.151" scale="2 2 2" rotation="90.000 -89.990 90.000" dynamic-body visible="false"></a-entity>

    <a-entity id="screwdriver" gltf-model="#screwdriver" position="0.649 1.012 -3.197" scale="2 2 2" rotation="0 0 0" dynamic-body
  show-name-on-hover="distance: 2; checkmarkId: #check-screwdriver-icon">
  <a-text value="Screwdriver" position="0 0.03 0" align="center" color="#FFFFFF" scale="0.1 0.1 0.1" face-camera
          font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
</a-entity>

    <a-entity id="GPU" gltf-model="#GPU" position="-2.100 1.025 -3.037" scale="2 2 2" rotation="180 90 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-gpu-icon">
      <a-text value="GPU" position="0.028 -0.086 -0.027" align="center" color="#FFFFFF" scale="0.2 0.2 0.2" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="zastrcka" gltf-model="#zastrcka" position="-5 0.136 -3.655" scale="2 2 2" rotation="0 53.230 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-plug-icon">
      <a-text value="Plug" position="0 0.3 0" align="center" color="#FFFFFF" scale="0.33 0.33 0.33" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="woodencase" gltf-model="#woodencase" position="1.482 1.480 -3.145" scale="2 2 2" rotation="0 0 0" dynamic-body
      show-name-on-hover="distance: 2; checkmarkId: #check-woodencase-icon">
      <a-text value="Wooden Case" position="0 0.3 0" align="center" color="#FFFFFF" scale="0.33 0.33 0.33" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="cpu" gltf-model="#cpu" position="-1.598 0.991 -2.831" scale="2 2 2" rotation="-90 0 0" dynamic-body visibility="true"
      show-name-on-hover="distance: 2; checkmarkId: #check-cpu-icon">
      <a-text value="CPU" position="0 0.053 0" align="center" color="#FFFFFF" scale="0.05 0.05 0.05" face-camera
              font="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/anton/Anton-Regular.json" shader="msdf" outline-width="0.05" outline-color="#000"></a-text>
    </a-entity>

    <a-entity id="krytnacpu1" gltf-model="#krytnacpu" position="-1.164 1.120 -3.295" scale="2 2 2" rotation="-10.000 180.000 0" dynamic-body visibility="true" visible="true" show-name-on-hover="distance: 2; checkmarkId: #check-cpu-icon">
    </a-entity>

    <a-entity id="krytnacpu2" gltf-model="#krytnacpu" position="-1.158 1.033 -3.209" scale="2 2 2" rotation="-90 180.000 0" dynamic-body visibility="true" visible="false" show-name-on-hover="distance: 2; checkmarkId: #check-cpu-icon"></a-entity>
    </a-entity>

    <!-- Additional Lighting -->
    <a-light type="ambient" color="#888" intensity="0.5"></a-light>
    <a-light type="directional" intensity="0.2" position="-1 1 0"></a-light>

    <!-- Script for handling text, steps, and animations -->
    <script>
      AFRAME.registerComponent('face-camera', {
        tick: function () {
          var cameraEl = document.querySelector('[camera]');
          var cameraPosition = cameraEl.object3D.position;
          this.el.object3D.lookAt(cameraPosition);
        }
      });
    
      AFRAME.registerComponent('show-name-on-hover', {
        schema: {
          distance: { type: 'number', default: 2 },
          checkmarkId: { type: 'string' }
        },
        init: function () {
          this.cameraEl = document.querySelector('[camera]');
          this.checkmarkEl = document.querySelector(this.data.checkmarkId);
          
    
          // Log current step for debugging
          console.log("Initialized component for element:", this.el.id, "Current Step:", currentStep);
    
          // Handle key press for different steps
          document.addEventListener('keydown', (event) => {
  if (event.key.toLowerCase() === 'e') {
    console.log("Pressed 'E' at step", currentStep);  // Debug log
    if (this.el.id === 'cpu' && currentStep === 2) {
      this.pickUpCPU();
    } else if (this.el.id === 'motherboard' && currentStep === 3) {
      this.installCPU();
    } else if (this.el.id === 'ram' && currentStep === 4 ) {
      this.secureCPU();
    } else if (this.el.id === 'PS' && currentStep === 5) {
      this.pickUpRAM();  // Handle RAM in step 5
    } else if (this.el.id === 'GPU' && currentStep === 6) {
      this.installRAM();  // Handle RAM installation in step 6
    }
    else if (this.el.id === 'ssd' && currentStep === 7) {
      this.pickUpSSD(); 
    }
    else if (this.el.id === 'krytnacpu1' && currentStep === 8) {
      this.installSSD();
    }
    else if (this.el.id === 'krytnacpu2' && currentStep === 9) {
      this.pickUpMotherboardWrapper();
    }
    else if (this.el.id === 'woodencase' && currentStep === 10) {
      this.installMotherboardWrapper();
    }
    
  }
});
        },
    
        tick: function () {
          var cameraPos = new THREE.Vector3();
          var objectPos = new THREE.Vector3();
          this.el.object3D.getWorldPosition(objectPos);
          this.cameraEl.object3D.getWorldPosition(cameraPos);
    
          var distance = cameraPos.distanceTo(objectPos);
    
          // Show the name of the object when user is close enough
          if (distance < this.data.distance && this.el.children.length > 0) {
            this.el.children[0].setAttribute('visible', 'true');
          } else if (this.el.children.length > 0) {
            this.el.children[0].setAttribute('visible', 'false');
          }
    
          // Show checkmark in step 1 (debug for screwdriver)
          if (this.el.id === 'screwdriver' && currentStep === 1) {
            if (distance < this.data.distance && this.el.children.length > 0) {
              this.el.children[0].setAttribute('visible', 'true');
              if (!this.stepTriggered) {
                this.stepTriggered = true;
                this.showCheckmark();
                setTimeout(() => {
                  updateStep();
                  this.hideCheckmark();
                }, 5000);
              }
            } else if (this.el.children.length > 0) {
              this.el.children[0].setAttribute('visible', 'false');
            }
          }
        },
    
        // Function for handling picking up the CPU
        pickUpCPU: function () {
          if (!this.stepTriggered) {
            console.log("Picked up CPU");  // Debug log
            this.stepTriggered = true;
    
            // Hide CPU on the table and show in hand
            const cpu = document.querySelector('#cpu');
            cpu.setAttribute('visible', 'false');
            const cpuHand = document.querySelector('#cpu_hand');
            cpuHand.setAttribute('visible', 'true');
    
            this.showCheckmark();
    
            setTimeout(() => {
              if (currentStep === 2) {
                this.hideCheckmark();
                updateStep();
              }
            }, 5000);
          }
        },
    
        // Function for installing the CPU into the motherboard
        installCPU: function () {
          if (!this.stepTriggered) {
            console.log("Installed CPU into motherboard");  // Debug log
            this.stepTriggered = true;
    
            const cpuHand = document.querySelector('#cpu_hand');
            cpuHand.setAttribute('visible', 'false');
            const cpuMotherboard = document.querySelector('#cpu_motherboard');
            cpuMotherboard.setAttribute('visible', 'true');
    
            this.showCheckmark();
    
            setTimeout(() => {
              if (currentStep === 3) {
                this.hideCheckmark();
                updateStep();
              }
            }, 5000);
          }
        },
    
        // Function for securing the CPU in the motherboard (step 4)
        secureCPU: function () {
  if (!this.stepTriggered && currentStep === 4) {
    this.stepTriggered = true;  // Zabezpečíme, že sa spustí len raz
    console.log("Secured CPU in motherboard (step 4)");  // Debug log
    

    const krytnacpu1 = document.querySelector('#krytnacpu1');
    const krytnacpu2 = document.querySelector('#krytnacpu2');
    krytnacpu1.setAttribute('visible', 'false');
    krytnacpu2.setAttribute('visible', 'true');

    this.showCheckmark();

    setTimeout(() => {
      if (currentStep === 4) {
        console.log("Moving from step 4 to 5");  // Debug log
        this.hideCheckmark();
        updateStep();  // Prechod na ďalší krok
      }
    }, 5000);
  } else if (currentStep > 4) {
    console.log("Step 4 already completed, skipping action.");  // Zabezpečíme, že krok 4 sa nevykoná znova
  }
},


    
        // Function for handling picking up the RAM in step 5
        pickUpRAM: function () {
          if (!this.stepTriggered && currentStep === 5) {
            console.log("Picked up RAM (step 5)");  // Debug log
            this.stepTriggered = true;
    
            const ramHand = document.querySelector('#ram_hand');
            ramHand.setAttribute('visible', 'true');
    
            this.showCheckmark();
    
            setTimeout(() => {
              if (currentStep === 5) {
                console.log("Moving from step 5 to 6");  // Debug log
                this.hideCheckmark();
                updateStep();  // Move to the next step
              }
            }, 5000);
          }
        },
        installRAM: function () {
  if (!this.stepTriggered && currentStep === 6) {
    console.log("Installing RAM into motherboard (step 6)");  // Debug log
    this.stepTriggered = true;

    // Skryjeme ram_hand
    const ramHand = document.querySelector('#ram_hand');
    ramHand.setAttribute('visible', 'false');

    // Zobrazíme jednotlivé RAM moduly na základnej doske
    const ramMotherboard = document.querySelector('#ram_motherboard');
    const ramMotherboard2 = document.querySelector('#ram_motherboard2');
    const ramMotherboard3 = document.querySelector('#ram_motherboard3');
    const ramMotherboard4 = document.querySelector('#ram_motherboard4');

    ramMotherboard.setAttribute('visible', 'true');
    ramMotherboard2.setAttribute('visible', 'true');
    ramMotherboard3.setAttribute('visible', 'true');
    ramMotherboard4.setAttribute('visible', 'true');

    this.showCheckmark();

    // Po 5 sekundách sa zobrazí ďalší krok
    setTimeout(() => {
      if (currentStep === 6) {
        console.log("Moving from step 6 to 7");  // Debug log
        
        this.hideCheckmark();
        updateStep();  // Aktualizácia na ďalší krok
      }
    }, 5000);
  }
},

pickUpSSD: function () {
  if (!this.stepTriggered && currentStep === 7) {
    console.log("Picked up SSD (step 7)");  // Debug log
    this.stepTriggered = true;

    // Zviditeľníme ssd_hand
    const ssdHand = document.querySelector('#ssd_hand');
    ssdHand.setAttribute('visible', 'true');

    this.showCheckmark();

    // Po 5 sekundách sa zobrazí ďalší krok
    setTimeout(() => {
      if (currentStep === 7) {
        console.log("Moving from step 7 to 8");  // Debug log
        this.hideCheckmark();
        updateStep();  // Prechod na ďalší krok
      }
    }, 5000);
  }
},

installSSD: function () {
  if (!this.stepTriggered && currentStep === 8) {
    console.log("Installing SSD into motherboard (step 8)");  // Debug log
    this.stepTriggered = true;

    // Skryjeme ssd_hand
    const ssdHand = document.querySelector('#ssd_hand');
    ssdHand.setAttribute('visible', 'false');

    // Zobrazíme ssd_motherboard
    const ssdMotherboard = document.querySelector('#ssd_motherboard');
    ssdMotherboard.setAttribute('visible', 'true');

    this.showCheckmark();

    // Po 5 sekundách sa zobrazí ďalší krok
    setTimeout(() => {
      if (currentStep === 8) {
        console.log("Moving from step 8 to 9");  // Debug log
        this.hideCheckmark();
        updateStep();  // Prechod na ďalší krok
      }
    }, 5000);
  }
},

pickUpMotherboardWrapper: function () {
  if (!this.stepTriggered && currentStep === 9) {
    console.log("Picked up motherboard wrapper (step 9)");  // Debug log
    this.stepTriggered = true;

    // Zobrazíme motherboard-wrapper
    const motherboardWrapper = document.querySelector('#motherboard-wrapper_hand');
    motherboardWrapper.setAttribute('visible', 'true');

    this.showCheckmark();

    // Po 5 sekundách sa zobrazí ďalší krok
    setTimeout(() => {
      if (currentStep === 9) {
        console.log("Moving from step 9 to 10");  // Debug log
        this.hideCheckmark();
        updateStep();  // Prechod na ďalší krok
      }
    }, 5000);
  }
},

installMotherboardWrapper: function () {
  if (!this.stepTriggered && currentStep === 10) {
    console.log("Installing motherboard wrapper (step 10)");  // Debug log
    this.stepTriggered = true;

    // Skryjeme motherboard-wrapper_hand
    const motherboardWrapperHand = document.querySelector('#motherboard-wrapper_hand');
    motherboardWrapperHand.setAttribute('visible', 'false');

    // Zobrazíme motherboard-wrapper
    const motherboardWrapper = document.querySelector('#motherboard-wrapper');
    motherboardWrapper.setAttribute('visible', 'true');

    this.showCheckmark();

    // Po 5 sekundách sa zobrazí ďalší krok
    setTimeout(() => {
      if (currentStep === 10) {
        console.log("Moving from step 10 to 11");  // Debug log
        
        this.hideCheckmark();
        updateStep();  // Prechod na ďalší krok
      }
    }, 5000);
  }
},



    
        // Helper function to show the checkmark
        showCheckmark: function () {
          if (this.checkmarkEl) {
            console.log("Checkmark shown");  // Debug log
            this.checkmarkEl.setAttribute('visible', 'true');
          }
        },
    
        // Helper function to hide the checkmark
        hideCheckmark: function () {
          if (this.checkmarkEl) {
            console.log("Checkmark hidden");  // Debug log
            this.checkmarkEl.setAttribute('visible', 'false');
          }
        }
      });
    
      // Steps and texts for each step
      const steps = [
        "1. Explore your workspace: Identify the CPU, motherboard, RAM, SSD, power supply, and tools for assembly.",
        "2. Pick up the CPU: Find the CPU on the table and pick it up.",
        "3. Install the CPU into the motherboard: Align it carefully and place it into the socket.",
        "4. Secure the CPU: Close the latch on the motherboard socket to secure the CPU.",
        "5. Pick up the RAM: Grab the RAM modules from the workspace.",
        "6. Install the RAM into the motherboard slots: Press them down until they click into place.",
        "7. Pick up the SSD: Find the SSD on the table and grab it.",
        "8. Install the SSD: Insert the SSD into its slot on the motherboard.",
        "9. Carefully pick up the motherboard: Gently lift the motherboard and prepare it for mounting.",
        "10. Mount the motherboard on the stand: Place the motherboard into the case on the stand.",
        "11. Ready for the first power-on test: All components are connected. Course is complete!"
      ];
    
      let currentStep = 0;  // Track the current step
      const maxLineLength = 30;  // Maximum characters per line for wrapping text
    
      // Function to update the step text and progress to the next step
      function updateStep() {
  if (currentStep < steps.length) {
    console.log("Updating to step", currentStep);  // Debug log

    // Správna aktualizácia textu kroku
    typeText(steps[currentStep], '#step1', 50, function() {});
    updateStepCounter(currentStep + 1);

    // Ak sme na poslednom kroku (11), vykonáme špeciálne akcie
    if (currentStep === 10) {  // Krok 11 je dosiahnutý, keď currentStep === 10
      console.log("Reached final step, hiding checkmarks and showing 'completed'");

      // Zneviditeľníme všetky checkmarky
      document.querySelector('#check-ps').setAttribute('visible', 'false');
      document.querySelector('#check-motherboard').setAttribute('visible', 'false');
      document.querySelector('#check-ram').setAttribute('visible', 'false');
      document.querySelector('#check-ssd').setAttribute('visible', 'false');
      document.querySelector('#check-screwdriver').setAttribute('visible', 'false');
      document.querySelector('#check-gpu').setAttribute('visible', 'false');
      document.querySelector('#check-plug').setAttribute('visible', 'false');
      document.querySelector('#check-woodencase').setAttribute('visible', 'false');
      document.querySelector('#check-cpu').setAttribute('visible', 'false');

      // Zviditeľníme entitu 'completed'
      document.querySelector('#completed_image').setAttribute('visible', 'true');
    }

    // Zvýšenie currentStep, aby sme prešli na ďalší krok
    if (currentStep < steps.length - 1) {
      currentStep++;  // Posun na ďalší krok
    } else {
      console.log("You have reached the final step!");
    }
  }
}
    
      // Function to type the text character by character
      function typeText(text, elementId, speed, callback) {
        let wrappedText = wrapText(text, maxLineLength);
        let i = 0;
        const element = document.querySelector(elementId);
        element.setAttribute('text', 'value', '');
        const interval = setInterval(() => {
          if (i < wrappedText.length) {
            element.setAttribute('text', 'value', element.getAttribute('text').value + wrappedText.charAt(i));
            i++;
          } else {
            clearInterval(interval);
            if (callback) callback();
          }
        }, speed);
      }
    
      // Function to wrap text based on the maximum line length
      function wrapText(text, maxLineLength) {
        const words = text.split(' ');
        let lines = [];
        let currentLine = '';
    
        words.forEach(word => {
          if ((currentLine + word).length <= maxLineLength) {
            currentLine += (currentLine ? ' ' : '') + word;
          } else {
            lines.push(currentLine);
            currentLine = word;
          }
        });
    
        lines.push(currentLine);
        return lines.join('\n');
      }
    
      // Function to update the step counter display
      function updateStepCounter(stepNumber) {
        const stepCounter = document.querySelector('#step-counter');
        stepCounter.setAttribute('text', 'value', 'Step ' + stepNumber + ' of ' + steps.length);
      }
    
      // Manual control of step (optional)
      document.addEventListener('keydown', function(event) {
        if (event.key.toLowerCase() === 'p') {
          updateStep();  // Manually progress to the next step
        }
      });
    
      updateStep();  // Initialize the first step on load
    </script>
    
    
    
    
    
      
      
      

  </a-scene>
</body>
</html>
